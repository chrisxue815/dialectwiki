<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
  <constant name="struts.devMode" value="true"/>
  <constant name="struts.i18n.encoding" value="utf-8"/>
  
  <include file="struts-default.xml"></include>
  
  <package name="dw-default" extends="struts-default">
  
    <interceptors>
      <interceptor name="headerDataInterceptor" class="headerDataInterceptor" />
      <interceptor-stack name="dwDefaultStack">
        <interceptor-ref name="defaultStack" />
        <interceptor-ref name="headerDataInterceptor" />
      </interceptor-stack>
    </interceptors>
    
    <default-interceptor-ref name="dwDefaultStack" />
    
  </package>
  
  
  <!-- / -->
  <package name="dw-root" namespace="/" extends="dw-default">

    <action name="" class="indexAction">
      <result name="success">/WEB-INF/jsp/index.jsp</result>
    </action>
    
    <action name="error">
      <result name="success">/WEB-INF/jsp/fileNotFound.jsp</result>
    </action>

    <action name="play" class="playAction">
    	<result name="success">/WEB-INF/jsp/pronunciation/play.jsp</result>
    </action>
  
    <action name="pronounce" class="pronouncePageAction">
      <result name="success">/WEB-INF/jsp/pronounce.jsp</result>
      <result name="nameNotExist" type="redirect">
        <param name="location">/addword</param>
        <param name="wordname">%{name}</param>
      </result>
      <result name="error" type="redirect">/error</result>
    </action>
    
    <action name="signup">
      <result name="success">/WEB-INF/jsp/signup.jsp</result>
    </action>
    
  	<action name="signupEx" class="org.dw.action.SignupExAction">
  		<result name="success" type="redirect">/login?signupSuccess</result>
  		<result name="error">/WEB-INF/jsp/signup.jsp</result>
  		<result name="input">/WEB-INF/jsp/signup.jsp</result>
  	</action>
  	
  	<action name="login">
  	 <result name="success">/WEB-INF/jsp/login.jsp</result>
  	</action>
  	
  	<!-- 上传发音的action 实现-->
  	<action name="upload_pronounce" class="pronounceUploadAction">
  		<result name="success">/WEB-INF/jsp/upload_success.jsp</result>
  		<result name="error">/WEB-INF/jsp/upload_error.jsp</result>
  	</action>
  	
    <action name="addword">
      <result name="success">/WEB-INF/jsp/word/add.jsp</result>
    </action>
    
    <action name="addwordEx" class="addWordExAction">
      <result name="success">/WEB-INF/jsp/word/add_success.jsp</result>
      <result name="error">/WEB-INF/jsp/word/add_failure.jsp</result>
      <result name="wordnameRequired" type="redirect">/addword</result>
    </action>
    
    <action name="words" class="wordIndexAction">
      <result name="success">/WEB-INF/jsp/word/index.jsp</result>
    </action>
    
    <action name="word" class="wordAction">
      <result name="success">/WEB-INF/jsp/word/word.jsp</result>
      <result name="words" type="redirect">/words</result>
      <result name="idNotExist" type="redirect">/error</result>
      <result name="wordNotExist" type="redirect">
        <param name="location">/addword?fromWord</param>
        <param name="wordname">%{name}</param>
      </result>
      <result name="pronounce" type="redirect">
        <param name="location">/pronounce?fromWord</param>
        <param name="id">%{word.wordId}</param>
      </result>
    </action>
    
    <action name="vcode" class="verificationCodeAction">
      <result name="success" type="stream"></result>
    </action>
    
    <action name="vote" class="addVoteAction">
    	<result name="success" type="redirect">
			<param name="location">/word</param>
			<param name="id">%{wordId}</param>
		</result>
		<result name="error" type="redirect">/error</result>
		<result name="failure" type="redirect">/vote-failed</result>
    </action>
    
    <action name="vote-failed">
    	<result name="success">/WEB-INF/jsp/vote/vote-failed.jsp</result>
    </action>

  </package>

</struts>
